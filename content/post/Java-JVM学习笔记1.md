---
title: Java JVM学习笔记1
date: 2018-07-05 14:18:01
categories: 
    - JVM虚拟机
tags:
    - java
    - JVM
---
光看书找不到重点，针对题目来学习一下《深入了理解Java虚拟机》。
## 以下哪个不属于JVM堆内存中的区域？
- Java堆分为：新生代（一般是一个Eden区，两个Survivor区），老年代（old区）
- 常量池属于 PermGen（方法区）
- 方法区和Java堆都是线程共享的

## JVM内存可简单分为三个区？
- 堆区（heap）：用于存放所有对象，是线程共享的（注：数组也属于对象）（用GC处理）
- 栈区（stack）：用于存放基本数据类型的数据和对象的引用，是线程私有的（分为：虚拟机栈和本地方法栈）
- 方法区（method）：用于存放类信息、常量、静态变量、编译后的字节码等，是线程共享的（也被称为非堆，即 None-Heap）（用帧栈处理）

## 内存分配与回收策略
- 对象优先在Eden分配
- 大对象直接进入老年代
- 长期存活的对象进入老年代
- 动态对象年龄判定

java的垃圾收集机制主要针对新生代和老年代的内存进行回收，不同的垃圾收集算法针对不同的区域。所以java的垃圾收集算法使用的是分代回收。一般java的对象首先进入新生代的Eden区域，当进行GC的时候会回收新生代的区域，新生代一般采用复制收集算法，将活着的对象复制到survivor区域中，如果survivor区域装在不下，就查看老年代是否有足够的空间装下新生代中的对象，如果能装下就装下，否则老年代就执行FULL GC回收自己，老年代还是装不下，就会抛出OUtOfMemory的异常
